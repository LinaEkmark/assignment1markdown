<p><strong><em>normal _ strong em</em></strong></p>
<p>Whole thing will be strong with sub em. <strong><em>em<em>_</em><em><em>em</em></em>__em</em></strong></p>
<p><strong>smart<em>_</em><em>_</em>strong</strong></p>
<p><em>em</em><em>_</em>em_</p>
<p><strong>dumb_strong</strong></p>
<p><strong><em>strong em</em> just strong with trailing underscore_</strong></p>
<p><strong><em>eat trailing tokens (but regular em will claim an underscore)<em>_</em>_</em></strong></p>
<p><em>_</em><em>only em will trigger on this</em>__</p>
<p>Em strong for entire scope, and sub ems. <strong><em>Here are some words<em>and more</em><em>and</em>more</em></strong></p>
<p><strong><em>strong em</em> just strong</strong></p>
<p><em><strong>em strong</strong> just em</em></p>
<p><em>_</em> em will claim the underscores <em>_</em></p>
<p>__ not valid __</p>
<p>_ not valid _</p>
<p><em>_</em>em__ not valid _</p>
<p><em>_</em>em_ not valid _</p>
<p><em>_</em> not valid _<em>em</em></p>
<p><em>_</em> not valid <em>em</em>_</p>
<p><strong>strong</strong> text_</p>
<p><em>em</em> text_</p>
<p>text<em>_</em>em underscores<em>_</em> text</p>
<p>text <em>_</em>em underscores<em>_</em>text</p>
<p>text <strong><em>em strong</em></strong> text</p>
<p>text<em><em>em</em></em> text</p>
<p>text <em><em>em</em></em>text</p>
<p>text <strong>strong</strong> text</p>
<p>text<em>em</em> text</p>
<p>text <em>em</em>text</p>
<p>text <em>em</em> text</p>