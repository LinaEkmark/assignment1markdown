<p><strong><em>normal _ strong em</em></strong></p>
<p><strong><em>strong,em</em></strong>_<em>em</em><strong><em>strong,em</em></strong></p>
<p>Breaks normal strong em. <strong><em>strong em</em> just strong</strong>_</p>
<p><strong><em>trailing tokens are eaten by ems</em></strong><em>_</em>_</p>
<p>_<strong><em>dumb rules make this strong,em</em></strong></p>
<p>Whole thing is em. <em><strong>strong_text</strong>and</em>em text<em>_</em></p>
<p><strong><em>strong em</em> just strong</strong></p>
<p><em><strong>em strong</strong> just em</em></p>
<p><em>_</em> em claims asterisks <em>_</em></p>
<p>__ not valid __</p>
<p>_ not valid _</p>
<p>_<strong>strong</strong> not valid _</p>
<p><em>_</em>em_ not valid _</p>
<p><em>_</em> em to the left _<em>em</em></p>
<p><em>_</em> em to the left <em>em</em>_</p>
<p><strong>strong</strong> text_</p>
<p><em>em</em> text_</p>
<p>text<strong><em>strong,em</em></strong> text</p>
<p>text <strong><em>strong,em</em></strong>text</p>
<p>text <strong><em>strong,em</em></strong> text</p>
<p>text<strong>strong</strong> text</p>
<p>text <strong>strong</strong>text</p>
<p>text <strong>strong</strong> text</p>
<p>text<em>em</em> text</p>
<p>text <em>em</em>text</p>
<p>text <em>em</em> text</p>